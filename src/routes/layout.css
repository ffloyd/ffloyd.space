@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@import '@fontsource/iosevka';
@import '@fontsource/iosevka-etoile';

@theme {
  --font-sans:
    'Iosevka Etoile', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol', 'Noto Color Emoji';
  --font-mono: 'Iosevka', ui-monospace, monospace;

  /*
  Semantic color system.

  Derives the palette from the base colors using OKLCH mixing.
  This keeps steps perceptually consistent and makes it safe to experiment with different base colors later.

  Avoid opacity-driven palettes because translucency does not work well as solution to mixing colors.
  Use real semi-transparency only when the design needs actual see-through surfaces.
  */
  --color-surface: #000;
  --color-ink: #fff;
  --color-light: #fff;

  /* A warmer variant used for occasional "happy" emphasis in reading contexts. */
  --color-ink-happy: #fff8dc;

  --color-line-border: color-mix(in oklch, var(--color-ink) 30%, var(--color-surface));
  --color-line-separator: color-mix(in oklch, var(--color-ink) 45%, var(--color-surface));

  --color-content-dim: color-mix(in oklch, var(--color-ink) 65%, var(--color-surface));

  --color-content-reading: color-mix(in oklch, var(--color-ink) 75%, var(--color-surface));
  --color-content-reading-happy: color-mix(in oklch,
      var(--color-ink-happy) 75%,
      var(--color-surface));

  --color-content-primary: color-mix(in oklch, var(--color-ink) 85%, var(--color-surface));
  --color-content-accent: color-mix(in oklch, var(--color-ink) 95%, var(--color-surface));
  --color-content-active: var(--color-ink);
}

/*
Glow is the signature interaction feedback.

Do not use as static effect cause it makes users to suspect that their vision is blurry. 
It's uncomfortable feeling.

Use for hover/focus/active states on interactive elements.
*/
@utility text-glow {
  @apply text-shadow-[0_0_20px] text-shadow-light;
}

/*
Tailwind typography theme for long reading.
*/
@utility prose-space {
  --tw-prose-body: var(--color-content-reading);
  --tw-prose-headings: var(--color-content-primary);
  --tw-prose-lead: color-mix(in oklch, var(--color-ink) 55%, var(--color-surface));
  --tw-prose-links: var(--color-content-primary);
  --tw-prose-bold: var(--color-content-primary);
  --tw-prose-counters: color-mix(in oklch, var(--color-ink) 55%, var(--color-surface));
  --tw-prose-bullets: color-mix(in oklch, var(--color-ink) 55%, var(--color-surface));
  --tw-prose-hr: var(--color-line-separator);
  --tw-prose-quotes: var(--color-content-primary);
  --tw-prose-quote-borders: var(--color-line-separator);
  --tw-prose-captions: color-mix(in oklch, var(--color-ink) 55%, var(--color-surface));
  --tw-prose-kbd: var(--color-content-primary);
  --tw-prose-kbd-shadows: var(--color-line-border);
  --tw-prose-code: var(--color-content-primary);
  --tw-prose-pre-code: var(--color-content-reading);
  --tw-prose-pre-bg: var(--color-surface);
  --tw-prose-th-borders: color-mix(in oklch, var(--color-ink) 55%, var(--color-surface));
  --tw-prose-td-borders: var(--color-line-separator);
}

@layer components {
  /*
  `prose-space` class above is not enough to define signature look-and-feel.
  */
  .article {
    @apply prose prose-space max-sm:prose-sm;

    /* Level 1 heading. Expected to be only one in the beginning of article. */
    @apply prose-h1:text-center;

    /* Links intentionally differ from navigation link styling. */
    @apply prose-a:decoration-line-separator prose-a:decoration-2 prose-a:underline-offset-4;
    @apply prose-a:hover:text-content-active prose-a:hover:text-glow;
    @apply prose-a:transition-all prose-a:duration-200;
  }

  /* Primary navigational link. */
  .link {
    @apply text-content-accent;
    @apply hover:text-content-active hover:text-glow;
    @apply active:text-content-active active:text-glow;
    @apply transition-all duration-200;
  }

  /* Secondary/back navigational link. No glow by design. */
  .link-back {
    @apply text-content-primary;
    @apply hover:text-content-active;
    @apply transition-all duration-200;
  }

  .central-title {
    @apply text-content-primary hover:text-content-active;
    @apply transition-colors duration-200;
    @apply text-[12vw] md:text-8xl;
    @apply text-center;
    @apply cursor-default;
  }
}

@layer base {
  body {
    @apply bg-surface text-content-reading;
  }
}
